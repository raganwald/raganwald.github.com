<html> 
<head>
        
        <title>An Approach to Composing Domain-Specific Languages in Ruby</title>

	<link rel="stylesheet" type="text/css" href="/blog.css" />
	<link rel="stylesheet" type="text/css" href="/sunburst.css" />



	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>

<body>

	<div id="leftcontent">
			<a href="http://raganwald.github.com/"><img src="http://i.minus.com/ioSY4FTZKVCwz.png"
			width="350" height="150" border="0" alt="raganwald" title="raganwald 2008" align="middle"/></a><br/>
			
				<div class="DateHeader">Friday, March 16, 2007</div>
			

			<div class="Post"><a name="6177546136968725833">&nbsp;</a>
				<span class="PostTitle">

					<a href="http://raganwald.github.com/2007/03/approach-to-composing-domain-specific.html" title="permanent link">An Approach to Composing Domain-Specific Languages in Ruby</a></span>
					<div style="clear:both;"></div><em>Whoa! This looks like a long post with a lot of code snippets. Am I going to have to do a lot of hard thinking, or can I just relax and enjoy a good rambling essay?</em><br /><br />This is a bit long, probably (like all my posts) 200% longer than necessary. If you just want to see a neat DSL that implements Haskell and Python&rsquo;s List Comprehensions written in Ruby, just <a href="#lcir">scroll to the bottom</a>.<br /><br /><em>If I do bother to read it all, will I learn some neat hacks?</em><br /><br />Yes, but you could learn them just as well by reading the <a href="#dslsource">source code</a> directly.<br /><br /><em>So the benefit of reading the whole thing is...?</em><br /><br />The List Comprehensions DSL is the <strong>what</strong>. The source code is the <strong>how</strong>. But the essay is the <strong>why</strong>.<br /><br />Reading the whole thing will take you through some of the pitfalls of writing DSLs and explain why I chose my particular workarounds.<br /><br />Furthermore, <a href="http://raganwald.github.com/2007/02/why-ruby-is-not-acceptable.html">there are a lot of corners in Ruby where you can easily assume that things work one way, but really they don&rsquo;t</a>. If you actually try the snippets on your computer, you&rsquo;ll have a much better chance of remembering where the pitfalls are. That&rsquo;s why I tried to give a working example for every point, rather than just explaining things in words.<br /><br />Of course, if you have no interest in writing your own Domain Specific Languages in Ruby just yet... this isn&rsquo;t meant as a <em>popular</em> essay, rather it&rsquo;s meant as an experience report for fellow <em>practitioners</em>. And honestly, there&rsquo;s a world market for maybe five tools for writing DSLs in Ruby.<br /><br />But since you&rsquo;re here, the essay starts below!<br /><br /><hr/><br /><strong>An Approach to Composing Domain-Specific Languages in Ruby</strong><br /><br />Ruby is often touted as a good language for writing Domain-Specific Languages (&#8220;DSLs&#8221;). There are a few arguments in favour of writing a DSL as part of an application.<br /><br />The first argument that comes to mind is that if the application&#8217;s domain experts have a specific natural language or jargon of their own, writing a DSL makes it easy for programmers and domain experts to collaborate. While it is rare to find substantial applications entirely written by non-programmers at this time in <em>any</em> language, it is quite feasible for non-programmers to write or validate portions of an application representing its &#8220;business rules&#8221; or domain logic, while programmers maintain its infrastructure.<br /><br /><pre><code>    include StarbucksDSL<br />    order = latte venti, half_caf, non_fat, no_foam, no_whip<br />    print order.prepare<br /></code></pre><p style="text-align: right;">&#8212;<a href="http://obiefernandez.com/presentations/obie_fernandez-agile_dsl_development_in_ruby.pdf">Building Domain Specific Languages in Ruby</a></p><br />Another argument in favour of a DSL is that even when non-programmers are not involved directly in coding an application, the programmers themselves often have a jargon of their own to describe entities, algorithms and data structures in the application. Having portions of the application written in a language closely resembling the programmer&#8217;s own jargon makes it easy for them to read each other&#8217;s work and understand its intent.<br /><br />Successful examples of DSLs embedded within existing languages and frameworks include <a href="http://www.rubyonrails.org/">Ruby on Rails</a>&#8217; ActiveRecord, where statements such as:<br /><br /><pre><code>    has_and_belongs_to_many :Bar<br />    validates_presence_of :blitz<br />    some_bars = Bar.find_by_tavern_license(license_number)<br /></code></pre><br />Are self-documenting to anyone familiar with relational models.<br /><br />The final argument I&#8217;ll repeat here is that a DSL is a very effective way to separate the <em>what</em> from the <em>how</em> of an algorithm. <a href="http://raganwald.github.com/2007/03/why-why-functional-programming-matters.html">Separation of concerns is a desirable property of good programs</a>, and DSLs provide this separation very clearly. In the ActiveRecord examples above, the exact mechanisms of relating tables, validating records, and performing searches is &#8220;abstracted away&#8221; from the code where the programmer declares how she would like the results used.<br /><br /><strong>Freedom is Slavery</strong><br /><br />DSLs can be hacked together quickly in Ruby (whether they can be made sufficiently robust for your production needs may require considerably more care). Hacking a DSL together with little effort is a benefit, especially when prototyping: sometimes the best way to design a DSL is to try to use it, so you can discover what you need to express.<br /><br /><div class="book"><a href="http://www.amazon.com/gp/product/0672328844?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0672328844"><img border="0" src="http://raganwald.github.com/uploaded_images/the_ruby_way.jpg"></a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0672328844" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br /><br /><a href="http://www.amazon.com/gp/product/0672328844?ie=UTF8&amp;tag=raganwald001-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0672328844">The Ruby Way</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=0672328844" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> is the perfect second Ruby book for serious programmers. The Ruby Way contains more than four hundred examples explaining how to do everything from distribute Ruby with Rinda to dynamic programming techniques just like these.<br /><br /></div>Some developers have raised the concern that extensive use of &#8220;magic&#8221; features leads to code that cannot be understood or maintained.<sup>1</sup> My own feeling is that DSLs lead to code that is easier to understand, not more difficult to understand. This leaves an argument about maintenance. Some techniques for meta-programming, such as extending core classes like Array, have what you might call &#8220;non-local effects.&#8221;<br /><br />For example, two different pieces of code might try to extend the same core class, interfering with each other. Each works in isolation and passes all of its unit tests. But when plugged into a larger application that uses them together, they break.<br /><br /><blockquote><br />  Lispers are among the best grads of the Sweep-It-Under-Someone-Else&#8217;s-Carpet School of Simulated Simplicity.<br /></blockquote><br /><p style="text-align: right;">&#8212;Larry Wall</p><br />Another problem occurs with extending the <code>Kernel</code> class or creating &#8220;top level&#8221; methods to be used as verbs in a DSL. You end up with name space crowding: you must be very careful that you do not redefine en existing method.<br /><br />To fix this problem, the code that implements the DSL needs to be contained so that it does not interfere with other code. We can still implement verbs as methods, but we must implement those methods in separate objects, classes, or modules.<br /><br /><strong>Zen in the Art of Program Maintenance</strong><br /><br />An established technique for implementing methods in objects is to define the methods and then execute a block of code using <code>instance_eval</code> so that it has access to the object&#8217;s methods.<br /><br /><blockquote><br />  I&#8217;m trying to get the Zen of building DSLs using Ruby. After reading a dozen or so pieces referenced by my favourite search engine, I have a feeling I&#8217;m still not quite getting it.<br /></blockquote><br /><p style="text-align: right;">&#8212;<a href="http://pluralsight.com/blogs/dbox/archive/2006/05/07/22985.aspx">Don Box</a></p><br />You know, code expresses an idea better than words express an idea&#8230; when the idea is about coding. Please try this example in irb. Don&#8217;t just skim the text and nod: there&#8217;s a powerful learning mechanism at work when you physically do things as you&#8217;re learning, even if it&#8217;s just copying, pasting, comparing the result in one window to the text in another, and so on:<br /><br /><pre><code>def bjarne<br />    'Barney'<br />end<br /><br />dsl = Object.new<br />def dsl.phred<br />    'Fred'<br />end<br /><br />plus = ' plus '<br /><br />print dsl.instance_eval {<br />    phred + plus + bjarne<br />}<br />##### "Fred plus Barney"<br /></code></pre><br />What does this show? Well, we have created a way to use a method defined in our <code>dsl</code> object, a local variable <code>plus</code>, and a top-level method <code>bjarne</code>. We can imagine scaling this up to defining a rich DSL in our DSL object and being able to mix verbs from the DSL with instance variables and other methods as we please.<br /><br />Touching back on the subject of containment, we have defined <code>bjarne</code> in <code>Kernel</code>. Now <code>bjarne</code> is essentially global. If we already defined <code>bjarne</code> somewhere else, we just clobbered it. And if we later run a piece of code that defines <code>bjarne</code>, we&#8217;ll clobber our own version. <code>phred</code> is different. It&#8217;s defined inside of an object, and it doesn&#8217;t conflict with any other <code>phred</code> we define elsewhere.<br /><br />Great! So&#8230; Can we cite a few examples of this technique in action (such as <a href="http://weblog.jamisbuck.org/2006/4/20/writing-domain-specific-languages">Jamis&#8217; post</a> where he calls <code>phred</code> and <code>bjarne</code> examples of <em>Sandboxing</em> and <em>Top-level methods</em>) and end the post here?<br /><br />No. The code above looks fine. But there is a hidden problem with this sandboxing technique:<br /><br /><pre><code>MyDsl = Object.new<br /><br />def MyDsl.phred<br />    'Fred'<br />end<br /><br />class ClientCode<br /><br />    def bjarne<br />        'Barney'<br />    end<br /><br />    def friends<br />        plus = ' plus '<br />        MyDsl.instance_eval { phred + plus + bjarne }<br />    end<br /><br />end<br /><br />ClientCode.new.friends<br />##### -:15:in `friends': undefined local variable or method `bjarne' for # (NameError) from -:15:in `friends' from -:20<br /></code></pre><br /><a href="http://worsethanfailure.com">WTF</a>?! This looks just like our top-level example, but we&#8217;ve placed our code inside of a <code>ClientCode</code> method. And <code>bjarne</code> is a method in ClientCode: this way we can continue to separate concerns, keeping <code>phred</code> inside our DSL and <code>bjarne</code> inside of the class where we are using the DSL. But it doesn&#8217;t work.<br /><br /><strong>Why <code>instance_eval</code> breaks (in tedious detail)</strong><br /><br />As you know, everything in Ruby is either a variable or a method (how it figures out the difference is a major irritation). When you invoke a method, you are actually sending a <em>message</em> to a <em>receiver</em>.<sup>2</sup> Sometimes you name the receiver (<code>some_object.a_method</code>), and there is no ambiguity.<br /><br />But when you just name the method (like <code>bjarne</code>), Ruby tries to find the method for itself. It does so by looking to see whether it is an instance method, in which case it behaves like <code>self.bjarne</code>. If not, it looks to see whether <code>bjarne</code> is top-level, in which case it calls that method in the <code>Kernel</code>. See for yourself:<br /><br /><pre><code>def foo<br />  'top level foo'<br />end<br /><br />def bar<br />  'top level bar'<br />end<br /><br />class Test<br />  def bar<br />    'instance method bar'<br />  end<br />  def test<br />    p foo<br />    p bar<br />  end<br />end<br /><br />Test.new.test<br />##### "top level foo" "instance method bar"<br /></code></pre><br />See? It looks for instance methods and then for top-level methods if it can&#8217;t find anything. (Again, we are hand-waving over the pesky problem with instance variables in the case where we don&#8217;t use <code>()</code>). What&#8217;s the problem? Well, I actually mis-described what happens. Here it is again, with more precision:<br /><br />It looks for methods defined in the object <code>self</code>, and then for top-level methods if it can&#8217;t find anything. Of course, <code>self</code> is the current object. Unless it isn&#8217;t: That&#8217;s what <code>instance_eval</code> does: it evaluates a block but it changes <code>self</code> to point to its receiver instead of the object where the code is executing. Everything else stays the same. One more example to show the mechanism:<br /><br /><pre><code>def foo<br />  'top level foo'<br />end<br /><br />def bar<br />  'top level bar'<br />end<br /><br />class Test<br />  def bar<br />    'instance method bar'<br />  end<br />  def blitz<br />    'current object blitz'<br />  end<br />  def test<br />    p foo<br />    p bar<br />    o = Object.new<br />    def o.blitz<br />        'redefined self blitz'<br />    end<br />    p o.instance_eval { blitz }<br />    p o.instance_eval { 'bar within o gives: ' + bar }<br />  end<br />end<br /><br />Test.new.test<br />##### "top level foo" "instance method bar" "redefined self blitz" "bar within o gives: top level bar"<br /></code></pre><br />Now we see: when we use <code>instance_eval</code>, we route around our current object and all of our methods are ignored within the block. Ruby really only has two levels of scope: whatever belongs to self and whatever belongs to Kernel.<br /><br />This state of affairs is unsatisfactory: we would like to introduce a DSL in such a way that we retain access to all of our methods without kludges (like storing the current object in an instance variable).<br /><br /><strong>Nesting Scopes</strong><br /><br /><div class="book"><a name="evtst|a|026256100X" href="http://www.amazon.com/gp/product/026256100X?ie=UTF8&amp;tag=raganwald001-20&amp;link_code=as3&amp;camp=211189&amp;creative=373489&amp;creativeASIN=026256100X"><img src="http://raganwald.github.com/uploaded_images/seasoned_schemer.jpg" border="0"></a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=026256100X" alt="" style="border: medium none  ! important; margin: 0px ! important;" border="0" height="1" width="1"><br><br><a name="evtst|a|026256100X" href="http://www.amazon.com/gp/product/026256100X?ie=UTF8&amp;tag=raganwald001-20&amp;link_code=as3&amp;camp=211189&amp;creative=373489&amp;creativeASIN=026256100X">The Seasoned Schemer</a><img src="http://www.assoc-amazon.com/e/ir?t=raganwald001-20&amp;l=as2&amp;o=1&amp;a=026256100X" alt="" style="border: medium none  ! important; margin: 0px ! important;" border="0" height="1" width="1"> is devoted to the myriad uses of first class functions. This book is approachable and a delight to read, but the ideas are provocative and when you close the back cover you will be able to compose programs from functions in powerful new ways.<br><br></div>You can think of the current <a href="http://en.wikipedia.org/wiki/Scope_%28programming%29">scope</a> as being nested inside of the top-level scope. <code>instance_eval</code> doesn&#8217;t change the scope for things like local variables, it just points <code>self</code> elsewhere.<br /><br />What we want is a new scope for our DSL nested inside of the current scope. So when we search for a method, we should check the DSL. If we don&#8217;t find it there, check the current object&#8217;s scope. If we don&#8217;t find it there, check the top-level.<br /><br /><blockquote><br />  Those who do not learn from the History of Lisp are doomed to repeat it.<br /></blockquote><br />Oops. <a href="http://www-formal.stanford.edu/jmc/">John McCarthy</a> called from 1960. He wants Lisp&#8217;s <em>dynamic scoping</em> back. Yes, our new feature is almost fifty years old. This is why either a through grounding in CS theory or a hobbyist&#8217;s interest in the history of programming are important for programming: much of what we want to do has already been done before, and sometimes in unexpected contexts. Who would have thought that a technique for helping programmers collaborate with Bond Traders has roots in Lisp 1.5?<br /><br /><a href="http://weblog.raganwald.com/source/dsl_and_let.html">Here&#8217;s an implementation of a nested scope construct</a> that does exactly what we want. You declare a new class that extends <code>DomainSpecificLanguage</code>, and then you can use methods from your DSL, from your current object, and from the top-level (if you so choose). For example:<br /><br /><pre><code>require 'dsl'<br /><br />class MyDSL &lt; DomainSpecificLanguage<br /><br />  def bjarne<br />    'Barney'<br />  end<br /><br />end<br /><br />class TheGreat<br /><br />  def phred<br />    'Fredrick'<br />  end<br /><br />  def test<br />    plus = ' plus '<br />    MyDSL.eval { p phred + plus + bjarne }<br />  end<br /><br />end<br /><br />TheGreat.new.test<br />##### "Fredrick plus Barney"<br /></code></pre><br />This does <em>exactly</em> what we want with methods.<br /><br />There's also a single extension to <code>kernel</code>, the method <code>with</code>. <code>with</code> replaces the <code>eval</code> method so you can also say:<br /><pre><code><br />    with MyDSL do<br />      p phred + plus + bjarne<br />    end<br /></code></pre><br /><br />The <code>eval</code> method creates a new instance of your DSL class, so you can track state within an evaluation. For example:<br /><br /><pre><code>class Censor &lt; DomainSpecificLanguage<br />  attr_reader :ok_on_tv<br /><br />  def initialize (given_binding)<br />    super(given_binding)<br />    @ok_on_tv = true<br />  end<br /><br />  def say something<br />    something.split.each do |word|<br />      @ok_on_tv = false if ['feces', 'urine', 'love', 'pudendum', 'fellator', 'oedipus', 'mammaries'].include?(word)<br />    end<br />  end<br /><br />end<br /><br />class GeorgeCarlin<br />  def test<br />    Censor.eval {<br />      say "People much wiser than I have said, I'd rather have my son watch a film with two people making love than two people trying to kill one other."<br />      say "And I of course agree. I wish I know who said it first, and I agree with that."<br />      ok_on_tv<br />    }<br />  end<br />end<br /><br />p GeorgeCarlin.new.test<br />##### "false"<br /></code></pre><br /><strong>let</strong><br /><br />The first obvious drawback of this approach is that the blocks we pass to <code>eval</code> cannot take parameters. For this reason, rumour has it that a method called <code>instance_exec</code> will be added to Ruby in 1.9. (There are some <a href="http://termos.vemod.net/object-instance_exec">implementations</a> available that work in Ruby 1.8 if you would like to experiment.)<br /><br />The second is that you don&#8217;t get anything like nested local variables, a &#8216;la Pascal, Scheme, or any other language with block structure. Block structure is very powerful: You can use a variable within a particular scope and nowhere else. Here&#8217;s a trivial example:<br /><br /><pre><code>with Let do<br />  let :x =&gt; 0, :y =&gt; 1 do<br />    assert_equal(1, x + y)<br />    let :x =&gt; 2 do<br />      assert_equal(3, x + y) <br />    end<br />    assert_equal(0, x)<br />  end <br />end<br /></code></pre><br />We're using the <code>with</code> syntax. In the <code>Let</code> DSL, there&rsquo;s a new method called <code>let</code>. <code>let</code> creates a new DSL within <code>Let</code>. You can see that re-declaring <code>x</code> does not clobber the value in the outer scope. That is because when <code>let</code> wrote a new DSL, it added <code>x</code> and <code>y</code> as methods.<br /><br />So really, that block of code says &ldquo;Write a new DSL where <code>x</code> and <code>y</code> are methods returning zero and one. Execute some code in that new DSL. That code will create <i>another</i> DSL where <code>x</code> is a method returning two.&rdquo;<br /><br />Because <code>let</code> defines methods and not local variables, bad things happen when you try to override real local variables. It&#8217;s best to use <code>Let</code> for some things and local variables for others, but not mix the two.<br /><br />Like what, you ask?<br /><br /><strong><a name="lcir">List Comprehensions in Ruby</a></strong><br /><br />A <a href="http://en.wikipedia.org/wiki/List_comprehension">List Comprehension</a> is syntactic sugar that lets you build collections using set-like notation. For example, <code>S = [ x | x&lt;-[0..], x^2&gt;3 ]</code> is a list comprehension in Haskell.<br /><br />Here is a <a href="http://weblog.raganwald.com/source/comprehensions.html">List Comprehensions DSL in Ruby</a>. Let&#8217;s say we&#8217;re building up a multiplication table. We want tuples of the form <code>[x, y, x * y]</code> given <code>x</code> is in the range <code>1..12</code> and <code>y</code> is in the range <code>1..12</code>. Let&#8217;s write that:<br /><pre><code><br />require 'comprehension'<br /><br />class MultiplicationTable<br />  def twelve_by_twelve<br />    with Comprehension::DSL do<br />      list { [x, y, x * y] }.given(:x =&gt; 1..12, :y =&gt; 1..12)<br />    end<br />  end<br />end<br />p MultiplicationTable.new.twelve_by_twelve<br />##### [[1, 1, 1], [1, 2, 2], [2, 1, 2], [1, 3, 3], [2, 2, 4] ...<br /></code></pre><br />(In everyday use, you don&rsquo;t need a class and a method for each comprehension: the important bit is <code>list {</code> <code>[x, y, x * y]</code> <code>}.given(:x =&gt; 1..12,</code> <code>:y =&gt; 1..12)</code>. I just wrote it this way so you could see that comprehensions work fine inside of methods. You can also use more than one comprehension inside of a single <code>with Comprehension::DSL do...</code> <code>end</code> block: see the unit tests for examples.)<br /><br />The expression in the block doesn&#8217;t have to be a tuple:<br /><pre><code><br />class MultiplicationTable<br />  def twelve_by_twelve<br />    with Comprehension::DSL do<br />      list { "#{x} times #{y} is #{x * y}" }.given(:x =&gt; 1..12, :y =&gt; 1..12)<br />    end<br />  end<br />end<br />p MultiplicationTable.new.twelve_by_twelve<br />##### ["1 times 1 is 1", "1 times 2 is 2", "2 times 1 is 2", "1 times 3 is 3", "2 times 2 is 4", ...<br /></code></pre><br />And you can stick a &#8220;where&#8221; block on the end:<br /><pre><code><br />class MultiplicationTable<br />  def twelve_by_twelve_odds<br />    with Comprehension::DSL do<br />      list { "#{x} times #{y} is #{x * y}" }.given(:x =&gt; 1..12, :y =&gt; 1..12) { (x % 2 == 1) &amp;&amp; (y % 2 == 1) }<br />    end<br />  end<br />end<br />p MultiplicationTable.new.twelve_by_twelve_odds<br />##### ... 3 times 5 is 15", "5 times 3 is 15", "7 times 1 is 7", "1 times 9 is 9", ...<br /></code></pre><br /><br />Would you like to nest them? Your expression is the interpreter&rsquo;s command:<br /><pre><code><br />class MultiplicationTable<br />  def odds_times_evens<br />    with Comprehension::DSL do<br />      list { "#{x} times #{y} is #{x * y}" }.given(<br />          :x => list { x }.given(:x => 1..12) { x % 2 == 0 } , <br />          :y => list { x }.given(:x => 1..12) { x % 2 == 1 } )<br />    end<br />  end<br />end<br />p MultiplicationTable.new.odds_times_evens<br />##### ... "2 times 11 is 22", "4 times 9 is 36", "6 times 7 is 42", ...<br /></code></pre><br /><strong>List Comprehensions and Let</strong><br /><br />What is the relationship to <code>Let</code>? Well, <code>Let</code> builds the scopes needed for evaluating the where clause and the block defining the elements of the list. Yes, we&#8217;ve built a DSL on top of a DSL on top of a DSL. Does this seem like weird trickery? I don&#8217;t know why. Do you have <em>any idea</em> how many levels of abstraction are responsible for you reading this essay right now?<br /><br />This is what we humans do: we build tools on top of tools. Your browser runs on an OS, possibly in a VM, perhaps in a hypervisor, on top of a BIOS, and on and on. This is the normal state of affairs, not an exception.<br /><br /><strong>Closing Remarks</strong><br /><br />It is possible to build DSLs in Ruby to facilitate cross-functional teamwork and separation of concerns. Care must be taken to avoid polluting the top-level name space, but it is possible to work within sandboxes and still have access to the current object&#8217;s context.<br /><br />Oh yes, and programming is fun as always<br /><br /><strong><a name="dslsource">Source Code</a></strong><br /><br /><em>Update: The copy of <code>dsl.rb</code> has been updated to the latest version. I had committed a rather typical manual synchronization error: I copied the latest file to the wrong directory when I first posted this. Thanks, Justin!</em><br /><br /><ul><li><a href="http://weblog.raganwald.com/source/dsl_and_let.html">DomainSpecificLanguage and Let</a></li><br /><li><a href="http://weblog.raganwald.com/source/comprehensions.html">Comprehension</a></li></ul><br /><br /><strong>How to try it for yourself</strong>: Open <a href="http://weblog.raganwald.com/source/dsl_and_let.html">DomainSpecificLanguage and Let</a>. Save the text only (not the HTML) as <code>dsl.rb</code>. Open <a href="http://weblog.raganwald.com/source/comprehensions.html"><code>Comprehension</code></a></li>. Save the text only as anything you like, as long as it is in the same directory as <code>dsl.rb</code>: I use <code>comprehension.rb</code>. Run <code>comprehension.rb</code>.<br /><hr /><ol><li>I generally call &#8220;<a href="http://en.wikipedia.org/wiki/Bullshit%21">Bullshit</a>!&#8221; on any line of reasoning that sets up a straw man argument just to knock it down. So read on with skepticism!</li><br /><li>Alan Kay has said that he regrets popularizing the notion of &#8220;Object-Oriented&#8221; programming, and that he should have called it &#8220;Message-Oriented&#8221; programming.</li></ol><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://raganwald.github.com/labels/lispy.html">lispy</a>, <a rel='tag' href="http://raganwald.github.com/labels/popular.html">popular</a>, <a rel='tag' href="http://raganwald.github.com/labels/ruby.html">ruby</a></p>&nbsp;
					<span class="PostFooter">

						&para; <a href="http://raganwald.github.com/2007/03/approach-to-composing-domain-specific.html" title="permanent link">12:19 PM</a>

					 
				</span> 


                                        <p id="postfeeds"></p>

			</div>

			
			    <div class="blogComments">
                                
                                <a name="comments"></a><strong>Comments on &ldquo;<em>An Approach to Composing Domain-Specific Languages in Ruby</em>&rdquo;</strong>:<br/>
						
							<div class="blogComment">
								<a name="1633510972717024588"></a> 				There's one important trick  to know if you're building block-based DSLs in Ruby: You should almost always use "environment" objects:<BR/><BR/>x = "blah"<BR/>my_dsl do |e|<BR/>  e.use(x)<BR/>end<BR/><BR/>Here, the block 'do ... end' is just an ordinary closure, run in the caller's environment. It's easy to access 'x' from within the block.<BR/><BR/>The DSL-related names, such as 'use', are accessed through 'e'. This allows you to keep the two different scopes straight.<BR/><BR/>This technique is used in Rake, XML::Builder, Rails routing, and many other DSLs. There are alternatives, but most of them are subtly broken in ways that you'll discover _after_ writing tons of code. :-(<br />
								<div class="byline"><a href="http://raganwald.github.com/2007/03/approach-to-composing-domain-specific.html?showComment=1174070940000#c1633510972717024588" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="http://www.blogger.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<a href="http://www.randomhacks.net/" rel="nofollow">emk</a> : 2:49 PM</div>

								<span class="item-control blog-admin pid-1482585217"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=1633510972717024588" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="6022981506192119622"></a> 				404 for http://weblog.raganwald.com/source/dsls_and_let.html<br />
								<div class="byline"><a href="http://raganwald.github.com/2007/03/approach-to-composing-domain-specific.html?showComment=1174137900000#c6022981506192119622" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="http://www.blogger.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="http://www.blogger.com/profile/16667352630170810773" rel="nofollow">Wilkes Joiner</a> : 9:25 AM</div>

								<span class="item-control blog-admin pid-1755712260"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=6022981506192119622" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="7900014710824447161"></a> 				looks like a small typo--should be<BR/>http://weblog.raganwald.com/source/dsl_and_let.html<br />
								<div class="byline"><a href="http://raganwald.github.com/2007/03/approach-to-composing-domain-specific.html?showComment=1174155900000#c7900014710824447161" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="http://www.blogger.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<span class="anon-comment-author">justin</span> : 2:25 PM</div>

								<span class="item-control blog-admin pid-1482585217"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=7900014710824447161" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="6345634089902283245"></a> 				This is quite a post, Reg.  Despite the amount of DSL buzz in the Ruby community of late, the signal to noise ratio has been rather low.  Instead of so much hand-waving, it's very refreshing to read a concrete discussion about some of the pitfalls everyone encounters along with some useful code to help alleviate them.<BR/><BR/>Two minor corrections:<BR/>The comprehension code doesn't run because of the Let.eval calls in given.  I'm not sure whether this was intended as <BR/>Let.eval do<BR/>&nbsp;&nbsp;let assignments, &mapping<BR/>end<BR/>or something else.<BR/><BR/>Anyhow, you can either use the eval syntax, or the equivalent with syntax, i.e.<BR/>with Let do<BR/>&nbsp;&nbsp;let assignments, &mapping<BR/>end<BR/>and things will be fine.<BR/><BR/>Finally, the &@where in the first Let block inside given should instead be &where so that the accessor is used.  Otherwise, @where will be nil in the context of the Let instance the block is evaluated within.<BR/><BR/>Making these changes, the code looks like this:<BR/><BR/>def given assignments = {}, &block<BR/>&nbsp;&nbsp;@where = block if block_given?<BR/>&nbsp;&nbsp;assignments.each { |term, value| @terms[term] = value }<BR/>&nbsp;&nbsp;names = terms.keys.sort { |a, b| a.to_s <=> b.to_s }<BR/>&nbsp;&nbsp;values = names.map { |term| terms[term].map { |value| { term => value } } }<BR/>&nbsp;&nbsp;product_of_assignments = self.class.cartesian_product(*values).map do |list_of_assignments|<BR/>&nbsp;&nbsp;&nbsp;&nbsp;list_of_assignments.inject { |acc, ass| acc.merge(ass) }<BR/>&nbsp;&nbsp;end<BR/>&nbsp;&nbsp;if @where<BR/>&nbsp;&nbsp;&nbsp;&nbsp;product_of_assignments = product_of_assignments.select do |assignments|<BR/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with Let do<BR/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let assignments, &where<BR/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<BR/>&nbsp;&nbsp;&nbsp;&nbsp;end<BR/>&nbsp;&nbsp;end<BR/>&nbsp;&nbsp;product_of_assignments.map do |assignments|<BR/>&nbsp;&nbsp;&nbsp;&nbsp;with Let do<BR/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let assignments, &mapping<BR/>&nbsp;&nbsp;&nbsp;&nbsp;end<BR/>&nbsp;&nbsp;end<BR/>end<BR/><BR/>Thanks again for the post.  It's arrival is particularly timely as we've a few new projects at work which are prime candidates for some DSL love.<br />
								<div class="byline"><a href="http://raganwald.github.com/2007/03/approach-to-composing-domain-specific.html?showComment=1174169100000#c6345634089902283245" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="http://www.blogger.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="http://www.blogger.com/profile/12939800713570723702" rel="nofollow">Justin</a> : 6:05 PM</div>

								<span class="item-control blog-admin pid-1079147059"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=6345634089902283245" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="6915637531877696020"></a> 				I am lost.  In the first example using the  "DomainSpecificLanguage" object, what is the "p" in line <BR/><BR/><I>MyDSL.eval { p phred + plus + bjarne }</I><BR/><BR/>Thanks<br />
								<div class="byline"><a href="http://raganwald.github.com/2007/03/approach-to-composing-domain-specific.html?showComment=1174233300000#c6915637531877696020" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="http://www.blogger.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<span class="anon-comment-author">Kyle Lahnakoski</span> : 11:55 AM</div>

								<span class="item-control blog-admin pid-1482585217"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=6915637531877696020" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="7691615605278779948"></a> 				Kyle, p is just a display method in the standard library. ri gives:<BR/>"For each object, directly writes _obj_.+inspect+ followed by the current output record separator to the program's standard output."<br />
								<div class="byline"><a href="http://raganwald.github.com/2007/03/approach-to-composing-domain-specific.html?showComment=1174260240000#c7691615605278779948" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="http://www.blogger.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="http://www.blogger.com/profile/12939800713570723702" rel="nofollow">Justin</a> : 7:24 PM</div>

								<span class="item-control blog-admin pid-1079147059"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=7691615605278779948" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="2530193065116079084"></a> 				Justin:<BR/><BR/>Very interesting. I pasted my code directly from TextMate after running each example.<BR/><BR/>When I get back next week, I would like to investigate why we are getting different results.<br />
								<div class="byline"><a href="http://raganwald.github.com/2007/03/approach-to-composing-domain-specific.html?showComment=1174310220000#c2530193065116079084" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="http://www.blogger.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="http://www.blogger.com/profile/13132345822387028437" rel="nofollow">Reginald Braithwaite</a> : 9:17 AM</div>

								<span class="item-control blog-admin pid-697692447"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=2530193065116079084" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="7148720387598378451"></a> 				The link has been fixed, thanks!<br />
								<div class="byline"><a href="http://raganwald.github.com/2007/03/approach-to-composing-domain-specific.html?showComment=1174310400000#c7148720387598378451" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="http://www.blogger.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="http://www.blogger.com/profile/13132345822387028437" rel="nofollow">Reginald Braithwaite</a> : 9:20 AM</div>

								<span class="item-control blog-admin pid-697692447"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=7148720387598378451" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="133699001642942888"></a> 				Reg@9:17AM:<BR/><BR/>Sounds good--I'll watch this space.<br />
								<div class="byline"><a href="http://raganwald.github.com/2007/03/approach-to-composing-domain-specific.html?showComment=1174341060000#c133699001642942888" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="http://www.blogger.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="http://www.blogger.com/profile/12939800713570723702" rel="nofollow">Justin</a> : 5:51 PM</div>

								<span class="item-control blog-admin pid-1079147059"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=133699001642942888" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
							<div class="blogComment">
								<a name="691577657882940217"></a> 				Trying real hard to follow this. But running the two major source files, dsl.rb and comprehension.rb I get the following errors persistently... Has there been a Ruby version change or am I just losing it?<BR/><BR/>------------------<BR/><BR/>  1) Error:<BR/>test_assignment(TestLet):<BR/>ArgumentError: wrong number of arguments (0 for 1)<BR/>method y in dsl.rb at line 340<BR/>method test_assignment in dsl.rb at line 340<BR/>method let in dsl.rb at line 142<BR/>method method_missing in dsl.rb at line 72<BR/>method test_assignment in dsl.rb at line 339<BR/>method let in dsl.rb at line 142<BR/>method test_assignment in dsl.rb at line 337<BR/>method eval in dsl.rb at line 81<BR/>method with in dsl.rb at line 95<BR/>method test_assignment in dsl.rb at line 336<BR/><BR/><BR/>  2) Error:<BR/>test_nesting(TestLet):<BR/>ArgumentError: wrong number of arguments (0 for 1)<BR/>method y in dsl.rb at line 328<BR/>method test_nesting in dsl.rb at line 328<BR/>method let in dsl.rb at line 142<BR/>method method_missing in dsl.rb at line 72<BR/>method test_nesting in dsl.rb at line 327<BR/>method let in dsl.rb at line 142<BR/>method test_nesting in dsl.rb at line 325<BR/>method eval in dsl.rb at line 81<BR/>method with in dsl.rb at line 95<BR/>method test_nesting in dsl.rb at line 324<br />
								<div class="byline"><a href="http://raganwald.github.com/2007/03/approach-to-composing-domain-specific.html?showComment=1186767360000#c691577657882940217" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="http://www.blogger.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="http://www.blogger.com/profile/07368689446751867993" rel="nofollow">Pito</a> : 1:36 PM</div>

								<span class="item-control blog-admin pid-116615360"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=7618424&postID=691577657882940217" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
							</div>
						
						
					  
					<br /> <p id="postfeeds"></p> <br />
					

					<br /> <br />
					<a href="http://raganwald.github.com/index.html">&lt;&lt; Home</a>
				</div>

			

		


	</div>







	<div id="rightcontent">

		<div class="SideBarTitle"><a href="http://braythwayt.com">Reg Braithwaite</a></div>

		<br />

		<br />

		<div class="SideBarTitle">Recent Writing</div>

                <a href="http://homoiconic.com">Homoiconic</a>

		<br/>

		<br/>

		<div class="SideBarTitle">Share</div>

                <a href="http://github.com/raganwald/rewrite_rails">rewrite_rails</a> /

                <a href="http://github.com/raganwald/andand">andand</a> /

                <a href="http://weblog.raganwald.com/source/unfold.rb.html">unfold.rb</a> /

                <a href="http://weblog.raganwald.com/source/string_to_proc.rb.html">string_to_proc.rb</a> /

                <a href="http://weblog.raganwald.com/source/dsl_and_let.html">dsl_and_let.rb</a> /

                <a href="http://weblog.raganwald.com/source/comprehensions.html">comprehension.rb</a> /

                <a href="http://weblog.raganwald.com/source/lazy_lists.html">lazy_lists.rb</a>

		<br />

		<br />

		<div class="SideBarTitle">Beauty</div> <!-- idioms -->

		<a href="http://raganwald.github.com/2008/04/is-strictly-equivalent-to.html">IS-STRICTLY-EQUIVALENT-TO-A</a> /

		<a href="http://raganwald.github.com/2008/03/spaghetti-western-coding.html">Spaghetti-Western Coding</a> /

		<a href="http://raganwald.github.com/2007/12/golf-is-good-program-spoiled.html">Golf is a good program spoiled</a> /

		<a href="http://raganwald.github.com/2007/11/programming-conventions-as-signals.html">Programming conventions as signals</a> /

                <a href="http://raganwald.github.com/2007/10/too-much-of-good-thing-not-all.html">Not all functions should be object methods</a>

<br/><br/>

                <a href="http://raganwald.github.com/2007/05/not-so-big-software-application.html">The Not So Big Software Design</a> /

		<a href="http://raganwald.github.com/2007/04/writing-programs-for-people-to-read.html">Writing programs for people to read</a> /
                
		<a href="http://raganwald.github.com/2007/03/why-why-functional-programming-matters.html">Why Why Functional Programming Matters Matters</a> /

		<a href="http://raganwald.github.com/2007/02/but-y-would-i-want-to-do-thing-like.html">But Y would I want to do a thing like this?</a>

		<br />

		<br />

		<div class="SideBarTitle">Work</div>

                <a href="http://raganwald.github.com/2008/04/single-most-important-thing-you-must-do.html">The single most important thing you must do to improve your programming career</a> /

                <a href="http://raganwald.github.com/2008/02/naive-approach-to-hiring-people.html">The Na&iuml;ve Approach to Hiring People</a> /

                <a href="http://raganwald.github.com/2008/01/no-disrespect.html">No Disrespect</a> /

		<a href="http://raganwald.github.com/2006/11/take-control-of-your-interview.html">Take control of your interview</a> /

		<a href="http://raganwald.github.com/2006/08/three-tips-for-getting-job-through.html">Three tips for getting a job through a recruiter</a> /

		<a href="http://raganwald.github.com/2006/06/my-favourite-interview-question.html">My favourite interview question</a>

                <br/>

                <br/>



		<div class="SideBarTitle">Management</div>

		<a href="http://raganwald.github.com/2008/02/exception-handling-in-software.html">Exception Handling in Software Development</a> /

		<a href="http://raganwald.github.com/2007/11/what-if-powerful-languages-and-idioms.html">What if powerful languages and idioms only work for small teams?</a> /

                <a href="http://raganwald.github.com/2007/08/bricks.html">Bricks</a> /

                <a href="http://raganwald.github.com/2007/06/which-theory-first-evidence.html">Which theory fits the evidence?</a> /

                <a href="http://raganwald.github.com/2007/06/still-failing-still-learning.html">Still failing, still learning</a> /

		<a href="http://raganwald.github.com/2005/01/what-ive-learned-from-failure.html">What I&rsquo;ve learned from failure</a>

		<br />

		<br />

		<div class="SideBarTitle">Notation</div> <!-- languages -->

		<a href="http://raganwald.github.com/2008/06/what-does-do-when-used-as-unary.html">The unary ampersand in Ruby</a> /

		<a href="http://raganwald.github.com/2008/02/1100inject.html">(1..100).inject(&amp;:+)</a> /

                <a href="http://raganwald.github.com/2007/10/challenge-of-teaching-yourself.html">The challenge of teaching yourself a programming language</a> /

                <a href="http://raganwald.github.com/2006/11/significance-of-meta-circular_22.html">The significance of the meta-circular interpreter</a> /
                
                <a href="http://raganwald.github.com/2007/08/block-structured-javascript.html">Block-Structured Javascript</a> /

                <a href="http://raganwald.github.com/2007/02/haskell-ruby-and-infinity.html">Haskell, Ruby and Infinity</a> /

		<a href="http://raganwald.github.com/2007/01/closures-and-higher-order-functions.html">Closures and Higher-Order Functions</a>

		<br />

		<br />

		<div class="SideBarTitle">Opinion</div>

		<a href="http://raganwald.github.com/2008/05/why-apple-is-more-expensive-than-amazon.html">Why Apple is more expensive than Amazon</a> /

		<a href="http://raganwald.github.com/2008/04/why-we-are-biggest-obstacle-to-our-own.html">Why we are the biggest obstacles to our own growth</a> /

		<a href="http://raganwald.github.com/2008/03/process-is-to-software-as-software-is.html">Is software the documentation of business process mistakes?</a> /

		<a href="http://raganwald.github.com/2007/09/we-have-lost-control-of-apparatus.html">We have lost control of the apparatus</a> /

		<a href="http://raganwald.github.com/2007/01/what-ive-learned-from-sales-part-i.html">What I&rsquo;ve Learned From Sales</a>
                <a href="http://raganwald.github.com/2007/01/what-ive-learned-from-sales-part-i.html" title="What I've Learned From Sales, Part I: Don't Feed the Trolls">I</a>, 
                <a href="http://raganwald.github.com/2007/01/what-ive-learned-from-sales-part-ii.html" title="What I've Learned from Sales, Part II: Wanna Bet?">II</a>, 
                <a href="http://raganwald.github.com/2007/10/how-to-use-blunt-instrument-to-sharpen.html" title="What I've Learned from Sales, Part III: How to use a blunt instrument to sharpen your saw">III</a>

		<br/>

		<br/>

		<div class="SideBarTitle">Whimsey</div>

                <a href="http://raganwald.github.com/2008/05/narcissism-of-small-code-differences.html">The Narcissism of Small Code Differences</a> /

		<a href="http://raganwald.github.com/2008/01/billy-martins-technique-for-managing.html">Billy Martin&rsquo;s Technique for Managing his Manager</a> /

		<a href="http://raganwald.github.com/2007/10/three-stories-about-tao.html">Three stories about The Tao</a> /

		<a href="http://raganwald.github.com/2007/02/programming-language-stories.html">Programming Language Stories</a> /

		<a href="http://raganwald.github.com/2005/07/why-you-need-degree-to-work-for-bigco.html">Why You Need a Degree to Work For BigCo</a>

		<br />

		<br />

		<div class="SideBarTitle">History</div>

		
			<a href="http://raganwald.github.com/archives/2004_06_01_archive.html">06/04</a> /
		
			<a href="http://raganwald.github.com/archives/2004_07_01_archive.html">07/04</a> /
		
			<a href="http://raganwald.github.com/archives/2004_08_01_archive.html">08/04</a> /
		
			<a href="http://raganwald.github.com/archives/2004_09_01_archive.html">09/04</a> /
		
			<a href="http://raganwald.github.com/archives/2004_10_01_archive.html">10/04</a> /
		
			<a href="http://raganwald.github.com/archives/2004_11_01_archive.html">11/04</a> /
		
			<a href="http://raganwald.github.com/archives/2004_12_01_archive.html">12/04</a> /
		
			<a href="http://raganwald.github.com/archives/2005_01_01_archive.html">01/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_02_01_archive.html">02/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_03_01_archive.html">03/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_04_01_archive.html">04/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_06_01_archive.html">06/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_07_01_archive.html">07/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_08_01_archive.html">08/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_09_01_archive.html">09/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_10_01_archive.html">10/05</a> /
		
			<a href="http://raganwald.github.com/archives/2005_11_01_archive.html">11/05</a> /
		
			<a href="http://raganwald.github.com/archives/2006_01_01_archive.html">01/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_02_01_archive.html">02/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_03_01_archive.html">03/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_04_01_archive.html">04/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_05_01_archive.html">05/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_06_01_archive.html">06/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_07_01_archive.html">07/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_08_01_archive.html">08/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_09_01_archive.html">09/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_10_01_archive.html">10/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_11_01_archive.html">11/06</a> /
		
			<a href="http://raganwald.github.com/archives/2006_12_01_archive.html">12/06</a> /
		
			<a href="http://raganwald.github.com/archives/2007_01_01_archive.html">01/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_02_01_archive.html">02/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_03_01_archive.html">03/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_04_01_archive.html">04/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_05_01_archive.html">05/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_06_01_archive.html">06/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_07_01_archive.html">07/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_08_01_archive.html">08/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_09_01_archive.html">09/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_10_01_archive.html">10/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_11_01_archive.html">11/07</a> /
		
			<a href="http://raganwald.github.com/archives/2007_12_01_archive.html">12/07</a> /
		
			<a href="http://raganwald.github.com/archives/2008_01_01_archive.html">01/08</a> /
		
			<a href="http://raganwald.github.com/archives/2008_02_01_archive.html">02/08</a> /
		
			<a href="http://raganwald.github.com/archives/2008_03_01_archive.html">03/08</a> /
		
			<a href="http://raganwald.github.com/archives/2008_04_01_archive.html">04/08</a> /
		
			<a href="http://raganwald.github.com/archives/2008_05_01_archive.html">05/08</a> /
		
			<a href="http://raganwald.github.com/archives/2008_06_01_archive.html">06/08</a> /
		
			<a href="http://raganwald.github.com/archives/2008_07_01_archive.html">07/08</a> /
		
		
		<br/></p>
		<br/>

		

	</div>





	<div style="visibility: hidden">
		
		
		<script type="text/javascript" src="http://www.assoc-amazon.com/s/link-enhancer?tag=raganwald001-20">
		</script>
		<noscript>
			<img src="http://www.assoc-amazon.com/s/noscript?tag=raganwald001-20" alt="" />
		</noscript>
	</div>

</body>
</html>
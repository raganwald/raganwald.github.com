{% assign top = 0 %}

{% for tag in page.tags %}

  {% assign leanpub = '' %}
  {% assign amazon = '' %}

  {% if tag == "combinators" %}
    {% assign amazon = 'B00A1P096Y' %}
    {% assign leanpub = '/combinators' %}
  {% elsif tag == "computation" %}
    {% assign amazon = '1449329276' %}
  {% elsif tag == "gameoflife" %}
    {% assign amazon = '048649098X' %}
  {% elsif tag == "surrealnumbers" %}
    {% assign amazon = '0201038129' %}
  {% elsif tag == "funjs" %}
    {% assign amazon = '1449360726' %}
  {% elsif tag == "effectivejs" %}
    {% assign amazon = '0321812182' %}
  {% elsif tag == "LiSP" %}
    {% assign amazon = '0521545668' %}
  
  {% elsif tag == "allonge" %}
    {% assign leanpub = '/javascript-allonge' %}
  {% elsif tag == "javascript" %}
    {% assign leanpub = '/javascript-allonge' %}
    {% assign amazon = '0321812182' %}
  {% elsif tag == "coffeescript" %}
    {% assign leanpub = '/coffeescript-ristretto' %}
    {% assign amazon = '1449321054' %}
  {% elsif tag == "ruby" %}
    {% assign leanpub = '/combinators' %}
    {% assign amazon = 'B00A376YAK' %}
    
  {% elsif tag == "management" %}
    {% assign leanpub = '/shippingsoftware' %}
  {% elsif tag == "programming" %}
    {% assign leanpub = '/b/coffee-kestrels-code' %}
    
  {% endif %}

  {% if leanpub != '' %}
    <iframe style="position:relative;float:right;left:180px;top:{{ top }}px;margin-left:-160px;" width="160" height="400" src="https://leanpub.com{{ leanpub }}/embed" frameborder="0" allowtransparency="true"></iframe>
    {% capture top %}{{ top | plus:420 }}{% endcapture %}
  {% elsif amazon != '' %}
    <iframe src="http://rcm.amazon.com/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=raganwald001-20&o=1&p=8&l=as4&m=amazon&f=ifr&ref=ss_til&asins={{ amazon }}" style="position:relative;float:right;left:180px;top:{{ top }}px;margin-left:-160px;width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>
    {% capture top %}{{ top | plus:260 }}{% endcapture %}
  {% endif %}
  
{% endfor %}